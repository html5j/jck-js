<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="lib/css/common.css">
<script src="lib/js/init.js"></script>
<body>
	<button onclick="omikuji();">おみくじを引く</button>

	<!-- 追加 -->

	<div id="kyou">あなたの今日の運勢は…</div>
	<div id="waku">
		<div id="bangou"></div>
		<div id="omikuji"></div>
		<div id="unsei">運勢</div>
	</div>
<script>
function omikuji(){
	var result = random(0,10);

	sakujo();

	if(result == 10 ){
		show('大吉');
		unsei('願い事　叶うでしょう');
		unsei('待ち人　来る');
		unsei('学　問　絶好調');
	}else if( result >= 1 ){
		show('中吉');
		unsei('願い事 叶うかも');
		unsei('待ち人　来れどもおそい');
		unsei('学　問　ふつう');
	}else{
		show('大凶');
		unsei('願い事 叶わず');
		unsei('待ち人　来ず');
		unsei('学　問　がんばれ');
	}

	/* これ書かせる？(これ隠すと書く部分がなくて一瞬で終わりそう */
	function show(omikuji){
		id('omikuji').innerText = omikuji;
		id('bangou').innerText = '第'+result+'番';
	}

	/* 引数を複数とって一気に追加したほうがよさげ */
	function unsei(text){
		var elem = document.createElement('div');
		elem.className = 'unsei';
		elem.innerText = text;
		id('waku').appendChild(elem);
	}

	/* 隠せるように書き換える */
	function sakujo(){
		var elems = document.getElementsByClassName('unsei');
		var length = elems.length;

		if(length){
			--length;
			for(;length > -1;length--){
				id('waku').removeChild(elems[length]);
			}
		}
	}
}

</script>